# Beruto v1.0 开发日志

发布日期：2025-12-09

## 概要
- 首个可运行的端到端版本：支持加载任务、拉取历史行情、运行策略回测、生成资金曲线，并通过 CLI 与绘图工具交互。
- 核心数据链路打通：适配 akshare / yfinance / 本地 CSV，附带缓存读写与错误分类。
- 提供示例策略与指标工具，便于快速扩展与验证。
- 完善文档，涵盖快速入门、命令行使用、接口设计与技术指标指南。

## 主要特性
- **回测引擎**：`src/backtest/engine.run_task` 读取任务 JSON，动态加载策略，调用数据层并驱动组合回测。
- **数据层**：统一 fetch 接口，适配 akshare、yfinance、本地 CSV；带 parquet 缓存读写、按需刷新。
- **策略与指标**：内置 SMA 金叉/死叉示例策略，提供 MA/EMA/RSI/MACD/BOLL/ATR 等指标及触发器 DSL（crossabove/crossbelow）。
- **绘图**：`plot_kline` 支持日/周 K 线、MA/EMA/BOLL/RSI/MACD/ATR 叠加，CLI 参数解析 `plot SYMBOL ...`。
- **日志与 CLI**：日志落盘到 `logs/`，CLI 支持 help / backtest / plot / config (占位)。

## 文档
- 新增 Manual 子目录，按子模块列出函数/类签名与用途，便于二次开发。
- 保留快速入门、命令行使用、接口设计与技术指标指南等主线文档。
- 添加了相关知识的文档，为后续复习与扩展提供参考。

## 已知限制 / 待办
- `common.config`, `common.utils`, `risk.RiskManager` 仍为占位，需要完善实现。
- CLI 的 config 命令未实现；GUI `main_window.py` 为空。
- 缺少自动化测试覆盖数据适配器、策略决策与回测边界场景。
- 策略库较为单一，需丰富多样化策略与参数调优示例。
- 代码注释不够充分，未完全贯彻自文档化写作模板。
- Portfolio 设计需增强：交易成本/滑点模型细化，多资产与现金管理、持仓轮转等能力。

## 后续展望
- 实现 UI 界面，打通交互与可视化入口。
- 落地基础风控（最大仓位/回撤）并在下单前校验。
- 为数据层与回测核心补充单元测试与集成测试；考虑加入 CI。
- 丰富策略库（多因子/均值回归/动量）与可视化报表；补充参数调优示例。
